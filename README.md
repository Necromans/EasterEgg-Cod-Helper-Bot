# EE Guide Bot

**EE Guide Bot** — это Telegram-бот, разработанный на `Python` с использованием фреймворка `aiogram 3.x`.  
Он предназначен для пошагового отображения игровых руководств (например, прохождения Easter Eggs в Call of Duty Zombies) с использованием текстов, изображений и GIF-анимаций.  
Бот построен с акцентом на модульность, простое расширение и чистую структуру данных.

---

## Основная идея

Проект решает задачу хранения и показа сложных пошаговых инструкций через Telegram.  
Каждая инструкция представлена в виде JSON-файла с описанием шагов, где каждый шаг может содержать:
- текстовое описание;
- одно или несколько изображений;
- GIF-анимации;
- кнопки для перехода к следующему шагу или выбора альтернативных действий.

Вся логика показа шагов отделена от данных, что позволяет добавлять новые карты и гайды без изменения кода.

---

## Особенности реализации

- Асинхронная архитектура на `aiogram 3.x`
- Гибкая структура шагов (text, photo, gif, multi_photo, выбор веток)
- Автоматическое управление активными сообщениями — при переходе к новому шагу бот удаляет старые, чтобы интерфейс оставался чистым
- Возможность возврата к предыдущему шагу (`⬅ Назад`)
- Разделение логики на модули (`handlers`, `utils`, `map_ee_structures`)
- Поддержка мультиязычности через внешние JSON-файлы (через `utils.localization`)

---

## Технологии

| Компонент | Используется для |
|------------|------------------|
| **Python 3.10+** | Основной язык проекта |
| **Aiogram 3.x** | Асинхронное взаимодействие с Telegram API |
| **JSON** | Хранение структуры шагов карт |
| **dotenv (.env)** | Хранение токена бота и приватных конфигураций |
| **SQLite / PostgreSQL (utils.database)** | Хранение пользовательских данных (например, языка) |

---

## Структура проекта

BotEE/
│
├── handlers/
│ └── map_handler.py # Основная логика обработки шагов и кнопок
│
├── map_ee_structures/ # JSON-файлы с инструкциями по картам
│ └── CodBo3/
│ ├── der_eisendrache_ru.json
│ └── der_eisendrache_en.json
│
├── utils/
│ ├── database.py # Функции для получения пользовательских данных
│ └── localization.py # Механизм перевода сообщений
│
├── assets/ # Изображения и GIF-файлы
│
├── .env # Переменные окружения (токен и т.п.)
├── .gitignore # Исключения из репозитория
├── requirements.txt # Список зависимостей
└── main.py # Точка входа


---

## Принцип работы

1. Пользователь выбирает игру и карту.
2. Бот загружает соответствующий JSON-файл с шагами.
3. Каждый шаг отображается как сообщение (текст / фото / gif).
4. Под каждым шагом есть кнопки навигации:
   - `"➡ Дальше"` — переход к следующему шагу;
   - `"⬅ Назад"` — возвращение к предыдущему;
   - кнопки выбора (если у шага есть несколько вариантов перехода).
5. При каждом переходе старые сообщения удаляются, чтобы диалог оставался аккуратным и понятным.

---

## Пример JSON-структуры шага

```json
{
  "steps": {
    "start": {
      "type": "text",
      "content": "Добро пожаловать! Это начало руководства.",
      "next_step": "step1"
    },
    "step1": {
      "type": "photo",
      "content": "Активируйте первый механизм.",
      "image": "assets/Images/CodBo3/Der_Eisendrache/step1.jpg",
      "next_step": "step2"
    },
    "step2": {
      "type": "multi_photo",
      "content": [
        { "text": "Соберите кристалл." },
        { "image": "assets/Images/CodBo3/Der_Eisendrache/step2_1.jpg" },
        { "image": "assets/Images/CodBo3/Der_Eisendrache/step2_2.jpg" }
      ],
      "next_step": "end"
    }
  }
}


Возможные направления развития

Добавление системы авторизации (для создателей гайдов)

Веб-интерфейс для редактирования JSON-шагов

Поддержка inline-режима Telegram

Автоматическая генерация миниатюр

Хранение прогресса пользователей

Автор

Alexey Frolov
